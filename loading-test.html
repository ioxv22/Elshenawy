<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار شاشة التحميل المحسنة</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
            <div class="welcome-logo">
                <img src="https://i.ibb.co/xSFLPSGn/image.png" alt="شعار الأستاذ إسلام الشناوي">
                <div class="logo-glow"></div>
            </div>
            <div class="welcome-text">
                <h1 class="welcome-title" data-ar="مرحباً بك في" data-en="Welcome to">مرحباً بك في</h1>
                <h2 class="welcome-subtitle" data-ar="عالم الفيزياء مع الأستاذ إسلام الشناوي" data-en="The World of Physics with Professor Islam El-Shenawy">عالم الفيزياء مع الأستاذ إسلام الشناوي</h2>
                <div class="welcome-tagline">
                    <span class="typing-text" id="typingText"></span>
                    <span class="cursor">|</span>
                </div>
            </div>
            <div class="welcome-animation">
                <div class="floating-particles">
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                </div>
            </div>
            <div class="welcome-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p class="progress-text" id="progressText" data-ar="جاري التحميل..." data-en="Loading...">جاري التحميل...</p>
                <p class="skip-hint" data-ar="انقر في أي مكان أو اضغط أي زر للتخطي" data-en="Click anywhere or press any key to skip">انقر في أي مكان أو اضغط أي زر للتخطي</p>
            </div>
        </div>
    </div>

    <!-- Main Content (Hidden initially) -->
    <div style="display: none;" id="mainContent">
        <div style="padding: 2rem; text-align: center; font-family: Cairo;">
            <h1>🎉 تم تحميل الموقع بنجاح!</h1>
            <p>شاشة التحميل الآن أسرع بكثير!</p>
            <button onclick="location.reload()" style="padding: 10px 20px; background: #1e3a8a; color: white; border: none; border-radius: 5px; cursor: pointer;">إعادة التجربة</button>
        </div>
    </div>

    <script src="language-toggle.js"></script>
    <script>
        // Initialize welcome screen with optimizations
        function initializeWelcomeScreen() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const typingText = document.getElementById('typingText');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const mainContent = document.getElementById('mainContent');
            
            if (!welcomeScreen) return;
            
            // Add click to skip functionality
            let isSkipped = false;
            function skipWelcomeScreen() {
                if (isSkipped) return;
                isSkipped = true;
                welcomeScreen.classList.add('hidden');
                setTimeout(() => {
                    welcomeScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                }, 500);
            }
            
            // Allow clicking anywhere to skip
            welcomeScreen.addEventListener('click', skipWelcomeScreen);
            
            // Allow pressing any key to skip
            document.addEventListener('keydown', function(e) {
                if (!isSkipped) {
                    skipWelcomeScreen();
                }
            }, { once: true });
            
            const messages = [
                'تعلم الفيزياء بطريقة مبسطة وممتعة',
                'اكتشف أسرار الكون والطبيعة',
                'حقق أحلامك الأكاديمية معنا'
            ];
            
            let messageIndex = 0;
            let charIndex = 0;
            
            function typeMessage() {
                if (isSkipped) return;
                
                if (charIndex < messages[messageIndex].length) {
                    typingText.textContent += messages[messageIndex].charAt(charIndex);
                    charIndex++;
                    setTimeout(typeMessage, 50);
                } else {
                    setTimeout(() => {
                        if (isSkipped) return;
                        messageIndex = (messageIndex + 1) % messages.length;
                        charIndex = 0;
                        typingText.textContent = '';
                        if (messageIndex < messages.length - 1) {
                            typeMessage();
                        }
                    }, 800);
                }
            }
            
            // Start typing animation faster
            setTimeout(typeMessage, 500);
            
            // Faster progress updates
            const progressSteps = [
                { progress: 25, text: 'تحميل الموارد...' },
                { progress: 50, text: 'إعداد الواجهة...' },
                { progress: 75, text: 'تحضير المحتوى...' },
                { progress: 100, text: 'مرحباً بك!' }
            ];
            
            let stepIndex = 0;
            
            function updateProgress() {
                if (isSkipped) return;
                
                if (stepIndex < progressSteps.length) {
                    const step = progressSteps[stepIndex];
                    progressFill.style.width = step.progress + '%';
                    progressText.textContent = step.text;
                    stepIndex++;
                    setTimeout(updateProgress, 400);
                } else {
                    setTimeout(() => {
                        if (!isSkipped) {
                            skipWelcomeScreen();
                        }
                    }, 300);
                }
            }
            
            // Start progress animation much sooner
            setTimeout(updateProgress, 800);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeWelcomeScreen);
    </script>
</body>
</html>