# 🔥 دليل إعداد Firebase - موقع الأستاذ إسلام الشناوي

## 🎯 نظام المصادقة المتكامل

تم إضافة نظام تسجيل دخول متكامل باستخدام Firebase مع الميزات التالية:

### ✅ **المميزات المُضافة:**

#### 🔐 **تسجيل الدخول المتعدد:**
- **تسجيل دخول بالإيميل وكلمة المرور**
- **تسجيل دخول بـ Google** (نقرة واحدة)
- **إنشاء حساب جديد** مع بيانات الطالب
- **تذكر المستخدم** عند العودة

#### 👤 **إدارة المستخدمين:**
- **ملف شخصي** لكل مستخدم
- **حفظ الصف الدراسي** والبيانات الشخصية
- **صورة المستخدم** من Google أو الأحرف الأولى
- **قائمة منسدلة** للمستخدم المسجل

#### 🎓 **نظام الاشتراكات:**
- **حماية الكورسات** للمشتركين فقط
- **عرض حالة الاشتراك** في الملف الشخصي
- **توجيه غير المشتركين** لصفحة الأسعار

## 🌐 **الموقع متاح الآن على:**
- **الرابط المحلي**: http://127.0.0.1:8000
- **صفحة تسجيل الدخول**: http://127.0.0.1:8000/login.html
- **لوحة الإدارة**: http://127.0.0.1:8000/admin.html

## 🔧 **كيفية الاستخدام:**

### 1. **للطلاب الجدد:**
1. اذهب إلى صفحة تسجيل الدخول
2. اضغط على "إنشاء حساب"
3. املأ البيانات (الاسم، الإيميل، الصف، كلمة المرور)
4. أو اضغط "إنشاء حساب بـ Google"
5. ستتم إعادة توجيهك للصفحة الرئيسية

### 2. **للطلاب المسجلين:**
1. اذهب إلى صفحة تسجيل الدخول
2. أدخل الإيميل وكلمة المرور
3. أو اضغط "تسجيل الدخول بـ Google"
4. ستظهر صورتك واسمك في الشريط العلوي

### 3. **الوصول للكورسات:**
- **غير مسجل**: سيطلب تسجيل الدخول أولاً
- **مسجل غير مشترك**: سيوجه لصفحة الاشتراكات
- **مسجل ومشترك**: وصول كامل للكورسات

## ⚙️ **إعدادات Firebase:**

### 📊 **بيانات المشروع:**
```javascript
Project ID: elshenawyphysics
Auth Domain: elshenawyphysics.firebaseapp.com
Storage: elshenawyphysics.firebasestorage.app
```

### 🔑 **المصادقة المفعلة:**
- ✅ Email/Password
- ✅ Google Sign-In
- ✅ حفظ بيانات المستخدمين في Firestore

### 📁 **هيكل قاعدة البيانات:**
```
users/
  └── {userId}/
      ├── name: "اسم الطالب"
      ├── email: "email@example.com"
      ├── grade: "grade9|grade10|grade11"
      ├── isSubscribed: false
      ├── subscriptionType: null
      ├── createdAt: timestamp
      └── photoURL: "url" (اختياري)
```

## 🎨 **واجهة المستخدم:**

### 🏠 **الصفحة الرئيسية:**
- **غير مسجل**: زر "تسجيل الدخول" + "اشترك الآن"
- **مسجل**: صورة المستخدم + قائمة منسدلة

### 📱 **القائمة المنسدلة للمستخدم:**
- **الملف الشخصي** (قيد التطوير)
- **اشتراكي** (عرض الحالة)
- **تسجيل الخروج**

### 🎯 **حماية المحتوى:**
- **الكورسات محمية** تلقائياً
- **رسائل واضحة** للمستخدمين
- **توجيه ذكي** حسب الحالة

## 🔒 **الأمان:**

### ✅ **قواعد الأمان المطبقة:**
- **تشفير كلمات المرور** بواسطة Firebase
- **التحقق من الإيميل** (اختياري)
- **حماية قاعدة البيانات** بقواعد Firestore
- **HTTPS فقط** في الإنتاج

### 🛡️ **قواعد Firestore المقترحة:**
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

## 🚀 **النشر:**

### 📤 **خطوات النشر:**
1. **رفع الملفات** لخادم الويب
2. **تفعيل HTTPS** (مطلوب لـ Firebase)
3. **إضافة النطاق** في إعدادات Firebase Auth
4. **تطبيق قواعد Firestore** للأمان

### 🌍 **النطاقات المسموحة:**
```
localhost:8000 (للتطوير)
127.0.0.1:8000 (للتطوير)
yourwebsite.com (للإنتاج)
```

## 🧪 **اختبار النظام:**

### ✅ **قائمة الاختبار:**
- [ ] إنشاء حساب بالإيميل
- [ ] إنشاء حساب بـ Google
- [ ] تسجيل دخول بالإيميل
- [ ] تسجيل دخول بـ Google
- [ ] عرض بيانات المستخدم
- [ ] تسجيل الخروج
- [ ] حماية الكورسات
- [ ] التوجيه للاشتراكات

### 🔍 **اختبار سريع:**
1. افتح http://127.0.0.1:8000
2. اضغط "تسجيل الدخول"
3. أنشئ حساب جديد
4. تحقق من ظهور اسمك في الشريط العلوي
5. جرب الوصول للكورسات

## 📞 **الدعم الفني:**

### ❓ **مشاكل شائعة:**

**المشكلة**: Firebase لا يعمل
**الحل**: تحقق من الاتصال بالإنترنت وإعدادات المتصفح

**المشكلة**: Google Sign-In لا يعمل
**الحل**: تأكد من إضافة النطاق في Firebase Console

**المشكلة**: البيانات لا تُحفظ
**الحل**: تحقق من قواعد Firestore Security Rules

### 🛠️ **أدوات التطوير:**
- **Firebase Console**: https://console.firebase.google.com
- **Chrome DevTools**: F12 → Console
- **Network Tab**: لمراقبة طلبات Firebase

---

## 🎉 **النظام جاهز للاستخدام!**

✨ **تم تطوير نظام مصادقة متكامل مع:**
- تسجيل دخول متعدد الطرق
- حماية المحتوى
- واجهة مستخدم احترافية
- أمان عالي المستوى

🚀 **الموقع جاهز للنشر والاستخدام الفوري!**